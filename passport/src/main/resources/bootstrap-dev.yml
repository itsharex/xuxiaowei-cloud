# 客户端 配置
cloud:
  security:
    # 启动RSA密码加密
    enabled-rsa: false
    passport-domain: http://passport.example.xuxiaowei.cloud:1411
  client:
    client-id: xuxiaowei_client_id
    client-secret: xuxiaowei_client_secret
    authorize-uri: http://gateway.example.xuxiaowei.cloud:1101/passport/oauth2/authorize
    check-token-uri: http://gateway.example.xuxiaowei.cloud:1101/passport/oauth2/check_token?token=
    redirect-uri: http://gateway.example.xuxiaowei.cloud:1101/passport/code
    consent-page: http://passport.example.xuxiaowei.cloud:1101/passport/oauth2.1/authorize
    access-token-uri: http://passport/oauth2/token
    scope: snsapi_base
    state-name: STATE_NAME
    home-page: http://example.xuxiaowei.cloud:1001/#/

---

#
# Nacos 极速上线
spring:
  cloud:
    nacos:
      discovery:
        metadata:
          preserved.heart.beat.interval: 1000
          preserved.heart.beat.timeout: 3000
          preserved.ip.delete.timeout: 3000

---

# CSRF 配置
cloud:
  security:
    csrfDisableUrl:
      # 禁用登录请求验证 CSRF Token
      # 如果使用登录服务保护登录服务的前端，请删除下面'[/login]'的配置
      '[/login]':
        - POST
        - OPTIONS
      # 授权码
      '[/code]':
        - POST
        - OPTIONS
      '[/oauth2/check_token]':
        - POST
        - OPTIONS
      '[/oauth2-authorization/**]':
        - POST
        - OPTIONS
      '[/oauth2-authorization-consent/**]':
        - POST
        - OPTIONS
      '[/oauth2-registered-client/**]':
        - POST
        - OPTIONS
      '[/configuration]':
        - POST
        - OPTIONS
      '[/actuator/**]':
        - POST
      # 找回密码
      '[/forget]':
        - POST
        - OPTIONS
      # 检查重置密码凭证
      '[/forget/check-reset-password-token]':
        - POST
        - OPTIONS
      # 重置密码
      '[/forget/reset-password]':
        - POST
        - OPTIONS
      # 重置密码（手机验证码）
      '[/forget/reset-type-phone-password]':
        - POST
        - OPTIONS

wechat:
  offiaccount:
    default-role: ${wechat_offiaccount_default_role:}
    list:
      - appid: ${wechat_offiaccount_appid:}
        secret: ${wechat_offiaccount_secret:}
        redirect-uri-prefix: http://gateway.example.xuxiaowei.cloud:1101/passport/wechat-offiaccount/code
        client-id: xuxiaowei_client_wechat_offiaccount_id
        client-secret: xuxiaowei_client_wechat_offiaccount_secret
        token-url-prefix: http://127.0.0.1:${server.port:80}
        scope: wechat_offiaccount
        success-url: http://example.xuxiaowei.cloud:1001/#/

---

wechat:
  oplatform:
    website:
      default-role: ${wechat_oplatform_website_default_role:}
      list:
        - appid: ${wechat_oplatform_website_appid:}
          secret: ${wechat_oplatform_website_secret:}
          redirect-uri-prefix: http://gateway.example.xuxiaowei.cloud:1101/passport/wechat-oplatform/website/code
          client-id: xuxiaowei_client_wechat_oplatform_id
          client-secret: xuxiaowei_client_wechat_oplatform_secret
          token-url-prefix: http://127.0.0.1:${server.port:80}
          scope: wechat_oplatform_website
          success-url: http://example.xuxiaowei.cloud:1001/#/

gitee:
  default-role: gitee
  list:
    - appid: ${gitee_appid:}
      secret: ${gitee_secret:}
      redirect-uri-prefix: http://gateway.example.xuxiaowei.cloud:1101/passport/gitee/code
      client-id: xuxiaowei_client_gitee_id
      client-secret: xuxiaowei_client_gitee_secret
      token-url-prefix: http://127.0.0.1:${server.port:80}
      scope: gitee
      success-url: http://example.xuxiaowei.cloud:1001/#/
qq:
  website:
    default-role: qq
    list:
      - appid: ${qq_website_appid:}
        secret: ${qq_website_secret:}
        redirect-uri-prefix: http://gateway.example.xuxiaowei.cloud:1101/passport/qq/website/code
        client-id: xuxiaowei_client_qq_website_id
        client-secret: xuxiaowei_client_qq_website_secret
        token-url-prefix: http://127.0.0.1:${server.port:80}
        scope: qq
        success-url: http://example.xuxiaowei.cloud:1001/#/

weibo:
  website:
    default-role: weibo
    list:
      - appid: ${weibo_appid:}
        secret: ${weibo_secret:}
        redirect-uri-prefix: http://gateway.example.xuxiaowei.cloud:1101/passport/weibo/code
        client-id: xuxiaowei_client_weibo_id
        client-secret: xuxiaowei_client_weibo_secret
        token-url-prefix: http://127.0.0.1:${server.port:80}
        scope: weibo
        success-url: http://example.xuxiaowei.cloud:1001/#/

gitlab:
  default-role: gitlab
  list:
    - appid: ${gitlab_appid:ac20813d473f1454519bc5e04e9dd3e633aaf599a48540e9e514500c2276b1d9}
      secret: ${gitlab_secret:b0cf6464db3fad1839eeab0e72189ef16a6e354dbe2bb7c762ccba01431336ab}
      domain: https://gitlab.xuxiaowei.cn
      redirect-uri-prefix: http://gateway.example.xuxiaowei.cloud:1101/passport/gitlab/code
      client-id: xuxiaowei_client_gitlab_id
      client-secret: xuxiaowei_client_gitlab_secret
      token-url-prefix: http://127.0.0.1:${server.port:80}
      scope: gitlab
      success-url: http://example.xuxiaowei.cloud:1001/#/
