# 客户端 配置
cloud:
  security:
    # 启动RSA密码加密
    enabled-rsa: false
    passport-domain: http://passport.example.xuxiaowei.cloud:1411
  client:
    client-id: xuxiaowei_client_id
    client-secret: xuxiaowei_client_secret
    authorize-uri: http://gateway.example.xuxiaowei.cloud:1101/passport/oauth2/authorize
    check-token-uri: http://gateway.example.xuxiaowei.cloud:1101/passport/oauth2/check_token?token=
    redirect-uri: http://gateway.example.xuxiaowei.cloud:1101/passport/code
    consent-page: http://passport.example.xuxiaowei.cloud:1101/passport/oauth2.1/authorize
    access-token-uri: http://passport/oauth2/token
    scope: snsapi_base
    state-name: STATE_NAME
    home-page: http://example.xuxiaowei.cloud:1001/#/

---

#
# Nacos 极速上线
spring:
  cloud:
    nacos:
      discovery:
        metadata:
          preserved.heart.beat.interval: 1000
          preserved.heart.beat.timeout: 3000
          preserved.ip.delete.timeout: 3000

---

# CSRF 配置
cloud:
  security:
    csrfDisableUrl:
      # 禁用登录请求验证 CSRF Token
      # 如果使用登录服务保护登录服务的前端，请删除下面'[/login]'的配置
      '[/login]':
        - POST
        - OPTIONS
      # 授权码
      '[/code]':
        - POST
        - OPTIONS
      '[/oauth2/check_token]':
        - POST
        - OPTIONS
      '[/oauth2-authorization/**]':
        - POST
        - OPTIONS
      '[/oauth2-authorization-consent/**]':
        - POST
        - OPTIONS
      '[/oauth2-registered-client/**]':
        - POST
        - OPTIONS
      '[/configuration]':
        - POST
        - OPTIONS
      '[/actuator/**]':
        - POST
      # 找回密码
      '[/forget]':
        - POST
        - OPTIONS
      # 检查重置密码凭证
      '[/forget/check-reset-password-token]':
        - POST
        - OPTIONS
      # 重置密码
      '[/forget/reset-password]':
        - POST
        - OPTIONS
      # 重置密码（手机验证码）
      '[/forget/reset-type-phone-password]':
        - POST
        - OPTIONS
      '[/oauth2/revoke]':
        - POST
        - OPTIONS

wechat:
  offiaccount:
    default-role: ${wechat_offiaccount_default_role:wechat_offiaccount}
    list:
      - appid: ${wechat_offiaccount_appid:}
        secret: ${wechat_offiaccount_secret:}
        redirect-uri-prefix: http://gateway.example.xuxiaowei.cloud:1101/passport/wechat-offiaccount/code
        client-id: xuxiaowei_client_wechat_offiaccount_id
        client-secret: xuxiaowei_client_wechat_offiaccount_secret
        token-url-prefix: http://127.0.0.1:${server.port:80}
        scope: wechat_offiaccount
        success-url: http://example.xuxiaowei.cloud:1001/#/

---

wechat:
  oplatform:
    website:
      default-role: ${wechat_oplatform_website_default_role:wechat_oplatform_website}
      list:
        - appid: ${wechat_oplatform_website_appid:}
          secret: ${wechat_oplatform_website_secret:}
          redirect-uri-prefix: http://gateway.example.xuxiaowei.cloud:1101/passport/wechat-oplatform/website/code
          client-id: xuxiaowei_client_wechat_oplatform_id
          client-secret: xuxiaowei_client_wechat_oplatform_secret
          token-url-prefix: http://127.0.0.1:${server.port:80}
          scope: wechat_oplatform_website
          success-url: http://example.xuxiaowei.cloud:1001/#/

gitee:
  default-role: ${gitee_default_role:gitee}
  list:
    - appid: ${gitee_appid:}
      secret: ${gitee_secret:}
      redirect-uri-prefix: http://gateway.example.xuxiaowei.cloud:1101/passport/gitee/code
      client-id: xuxiaowei_client_gitee_id
      client-secret: xuxiaowei_client_gitee_secret
      token-url-prefix: http://127.0.0.1:${server.port:80}
      scope: gitee
      success-url: http://example.xuxiaowei.cloud:1001/#/
qq:
  website:
    default-role: ${qq_website_default_role:qq_website}
    list:
      - appid: ${qq_website_appid:}
        secret: ${qq_website_secret:}
        redirect-uri-prefix: http://gateway.example.xuxiaowei.cloud:1101/passport/qq/website/code
        client-id: xuxiaowei_client_qq_website_id
        client-secret: xuxiaowei_client_qq_website_secret
        token-url-prefix: http://127.0.0.1:${server.port:80}
        scope: qq_website
        success-url: http://example.xuxiaowei.cloud:1001/#/
---

qq:
  mini:
    program:
      default-role: ${qq_miniprogram_default_role:qq_website}
      list:
        - appid: ${qq_miniprogram_appid:}
          secret: ${qq_miniprogram_secret:}

weibo:
  website:
    default-role: ${weibo_default_role:weibo}
    list:
      - appid: ${weibo_appid:}
        secret: ${weibo_secret:}
        redirect-uri-prefix: http://gateway.example.xuxiaowei.cloud:1101/passport/weibo/code
        client-id: xuxiaowei_client_weibo_id
        client-secret: xuxiaowei_client_weibo_secret
        token-url-prefix: http://127.0.0.1:${server.port:80}
        scope: weibo
        success-url: http://example.xuxiaowei.cloud:1001/#/

gitlab:
  default-role: ${gitlab_default_role:gitlab}
  list:
    - appid: ${gitlab_appid:}
      secret: ${gitlab_secret:}
      domain: ${gitlab_domain:https://gitlab.com}
      redirect-uri-prefix: http://gateway.example.xuxiaowei.cloud:1101/passport/gitlab/code
      client-id: xuxiaowei_client_gitlab_id
      client-secret: xuxiaowei_client_gitlab_secret
      token-url-prefix: http://127.0.0.1:${server.port:80}
      scope: gitlab
      success-url: http://example.xuxiaowei.cloud:1001/#/

---

wechat:
  work:
    website:
      default-role: ${wechat_work_website_default_role:wechat_work_website}
      list:
        - appid: ${wechat_work_website_appid:}
          agentid: ${wechat_work_website_agentid:}
          secret: ${wechat_work_website_secret:}
          redirect-uri-prefix: http://gateway.example.xuxiaowei.cloud:1101/passport/wechat-work/website/code
          client-id: xuxiaowei_client_wechat_work_website_id
          client-secret: xuxiaowei_client_wechat_work_website_secret
          token-url-prefix: http://127.0.0.1:${server.port:80}
          scope: wechat_work_website
          success-url: http://example.xuxiaowei.cloud:1001/#/

---

wechat:
  mini:
    program:
      default-role: ${wechat_miniprogram_default_role:wechat_miniprogram}
      list:
        - appid: ${wechat_miniprogram_appid:}
          secret: ${wechat_miniprogram_secret:}


github:
  default-role: ${github_default_role:github}
  list:
    - appid: ${github_appid:}
      secret: ${github_secret:}
      redirect-uri-prefix: http://gateway.example.xuxiaowei.cloud:1101/passport/github/code
      client-id: xuxiaowei_client_github_id
      client-secret: xuxiaowei_client_github_secret
      token-url-prefix: http://127.0.0.1:${server.port:80}
      scope: github
      success-url: http://example.xuxiaowei.cloud:1001/#/


dingtalk:
  default-role: ${github_default_role:dingtalk}
  list:
    - appid: ${github_appid:}
      secret: ${github_secret:}
      redirect-uri-prefix: http://gateway.example.xuxiaowei.cloud:1101/passport/dingtalk/code
      client-id: xuxiaowei_client_dingtalk_id
      client-secret: xuxiaowei_client_dingtalk_secret
      token-url-prefix: http://127.0.0.1:${server.port:80}
      scope: dingtalk
      success-url: http://example.xuxiaowei.cloud:1001/#/
